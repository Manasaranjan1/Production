@isTest(SeeAllData=true)
public class LeadTriggerHandler_Test 
{
    public static testMethod void leadConversionUnitTest1() {
       // try{
       Id recTypeId = Schema.SObjectType.Lead.getRecordTypeInfosByName().get('GRANT').getRecordTypeId();
       Tenant_Details__c objTenant =[ Select id,Tenant_ID__c,PortalAPIEndPoint__c, Name from Tenant_Details__c Where Tenant_ID__c=1 limit 1];
        
        Lead objLead = new Lead();
        objLead.RecordTypeId = recTypeId;
        objLead.Tenant_Details__c = objTenant.id;
        objLead.Title = 'Mr.';
        objLead.FirstName = 'FirstName';
        objLead.LastName = 'test';
        objLead.Company = 'Test';
        objLead.Business_EIN__c = '123456789';
        objlead.Base64_Encoded_Pardot_Url_Parameter__c = 'MDBRMmEwMDAwMDVPbkxGRUEwfHwwMi4wMi4yMDIwIDE5OjAw';
        objLead.Entity_Type__c = 'Corporation';
        objlead.DoNotCall = false;
        objlead.HasOptedOutOfFax = false;
        objlead.Phone = '999-999-9999';
        objlead.pi__Needs_Score_Synced__c = false;
        objlead.pi__pardot_hard_bounced__c = false;
        objlead.Run_Credit_Report__c = false;
        objlead.Run_Owner2_Credit_Report__c = false;
        objlead.Run_Owner3_Credit_Report__c = false;
        objlead.Run_Owner4_Credit_Report__c = false;
        objlead.Run_Owner5_Credit_Report__c = false;
        objLead.Status = 'New';
        objLead.Status_Detail__c = 'New';

        objlead.SSN1__c = '000-00-0001';
        objLead.Street_Owner_1__c='220 Locust Ave';
        objLead.City_Owner_1__c = 'Anthill';
        objLead.State_Owner_1__c='MO';
        objLead.Zip_Code_Owner_1__c='65488';
        objLead.Country_Owner_1__c='US';
        objLead.Email = 'first@gmail.com';
        
        objLead.of_Ownership_Owner__c = 30;
        objLead.Credit_Score__c = 'under 600'; 
        objLead.Run_Credit_Report__c= true;
        objlead.Owner_ID_Owner_1__c = '123';
        objlead.Credit_Score_5th_Owner_from_Webform__c = 'Over 700';
        objlead.DOB_Owner_1__c = Date.newInstance(1989, 12, 9);
        //objlead.DOB_Owner_1__c = Date.today();
        //Second Owner Details
        objLead.Title_2nd_Owner__c = 'Ms';
        objLead.First_Name_2nd_Owner__c = 'SecondName';
        objLead.Last_Name_2nd_Owner__c = 'LastName';
        objLead.SSN2__c = '000-00-0001';
        objLead.Street_Owner_2__c = '220 Locust Ave';
        objLead.State_Owner_2__c = 'MO';
        objLead.Zip_Code_Owner_2__c = '65488';
        objLead.Country_Owner_2__c = 'US';
        objLead.Email_2nd_Owner__c = 'second@gmail.com';
        ObjLead.Phone_2nd_Owner__c = '999-999-9999';
        objLead.of_Ownership_Second_Owner__c = 2;
        objLead.City_Owner_2__c = 'Anthill';
        ObjLead.Credit_Score_2nd_Owner__c = '600 to 650';
        objLead.Run_Owner2_Credit_Report__c =true;
        objLead.Owner_ID_Owner_2__c = '124';
        objlead.DOB_Owner_2__c =Date.newInstance(1989, 12, 9);
        //Third Owner Details
        objLead.First_Name_3rd_Owner__c = 'ThirdName';
        objLead.Last_Name_3rd_Owner__c = 'LastName';
        objLead.SSN_3rd_Owner__c = '000-00-0001';
        objLead.of_Ownership_3rd_Owner__c = 2;
        objLead.City_Owner_3__c = 'Anthill';
        objLead.Email_3rd_Owner__c = 'third@gmail.com';
        objLead.Street_Owner_3__c = '220 Locust Ave';
        objLead.State_Owner_3__c = 'MO';
        objLead.Title_3rd_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_3__c ='65488';
        objLead.Country_Owner_3__c = 'US';
        ObjLead.Credit_Score_3rd_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_3rd_Owner__c = '999-999-9999';
        objLead.Run_Owner3_Credit_Report__c =true;
        objLead.Owner_ID_Owner_3__c = '125';
        objlead.DOB_Owner_3__c = Date.newInstance(1989, 12, 9);
        //Fourth Owner details
        objLead.First_Name_4th_Owner__c = 'FourthName';
        objLead.Last_Name_4th_Owner__c = 'LastName';
        objLead.SSN_4th_Owner__c = '000-00-0001';
        objLead.of_Ownership_4th_Owner__c = 2;
        objLead.City_Owner_4__c = 'Anthill';
        objLead.Email_4th_Owner__c = 'fourth@gmail.com';
        objLead.Street_Owner_4__c = '220 Locust Ave';
        objLead.State_Owner_4__c = 'MO';
        objLead.Title_4th_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_4__c = '65488';
        objLead.Country_Owner_4__c = 'US';
        ObjLead.Credit_Score_4th_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_4th_Owner__c = '999-999-9999';
        objLead.Run_Owner4_Credit_Report__c=true;
        objLead.Owner_ID_Owner_4__c = '126';
        objlead.DOB_Owner_4__c =Date.newInstance(1989, 12, 9);
        //Fifth Owner Details
        objLead.First_Name_5th_Owner__c = 'FifthName';
        objLead.Last_Name_5th_Owner__c = 'LastName';
        objLead.SSN_5th_Owner__c = '000-00-0001';
        objLead.of_Ownership_5th_Owner__c = 12;
        objLead.City_Owner_5__c = 'Anthill';
        objLead.Email_5th_Owner__c   = 'fifth@gmail.com';
        objLead.Street_Owner_5__c = '220 Locust Ave';
        objLead.State_Owner_5__c = 'MO';
        objLead.Title_5th_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_5__c = '65488';
        objLead.Country_Owner_5__c = 'US';
        ObjLead.Credit_Score_5th_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_5th_Owner__c = '999-999-9999';
        ObjLead.Run_Owner5_Credit_Report__c =true;
        objLead.Owner_ID_Owner_5__c = '127';
 		objlead.DOB_Owner_5__c =Date.newInstance(1989, 12, 9);
        objLead.Are_you_COD_30_60_90__c = ' Yes';
        objLead.AnnualRevenue = 2313;
        objLead.Brief_History_on_the_business__c = 'Testing';
        objLead.What_exactly_does_the_business_do__c = 'Test';
        objLead.Who_is_your_customer_base__c = 'test';
        objLead.Do_You_Carry_Life_Insurance__c = 'test';
        objLead.Planned_Changes_In_Next_6_Months__c = 'test';
        objLead.Brief_History_on_the_owner_manager__c = 'test';
        objLead.What_are_the_terms_of_your_current_lease__c = 'test';
        objLead.Who_is_your_customer_base__c = 'test';
        objLead.Do_you_pay_child_support_or_alimony__c = 'yes';
        objLead.Explanation_of_any_BKs_defaults_etc__c = 'Test';
        objLead.Industry = 'Banking';
        objLead.Profitable_Last_2_Years__c = 'Yes';
        objLead.Requested_Amount__c = 6000;
        objLead.Homeowner__c = 'Yes';
        objLead.Monthly_Rent_Mtg__c = 500;
        objLead.Net_Worth__c = 51000;        
        objLead.TIB_Months__c = '21';
        objLead.Use_of_Funds__c = 'Working Capital';
        objLead.What_are_the_terms_of_your_current_lease__c ='Testing';
        objLead.Are_you_COD_30_60_90__c = 'Testing';
        objLead.Brief_History_on_the_business__c = 'Testing'; 
        objLead.Brief_History_on_the_owner_manager__c = 'Testing';
        objLead.Who_is_your_customer_base__c = 'Testing';
        objLead.What_is_the_purpose_of_loan__c =  'Testing';
        objLead.What_are_the_terms_of_your_current_lease__c =  'Testing';
        objLead.Referral_type__c = 'BANK';
        objLead.What_does_your_Business_do__c = 'Service Business';
        objLead.What_type_of_Business_is_it__c = 'Entertainment';
        objLead.Tell_us_more__c = 'Full Service Restaurant';
        objLead.BusinessId__c = '1156';
        objLead.LeadSource = 'Portal';
        objLead.Campaign_Source__c = 'Finished';
        objLead.Portal_Application_Status__c= 'Finished';
        insert objLead;
        
        Set <String> SetofLeadID = new set <String>();
        SetofLeadID.add(ObjLead.Id);
        //=====================Creating Credit Report test Data==========================
        List<creditchecker__Credit_Report__c> listCR = new List<creditchecker__Credit_Report__c>();
        //if(oLead.Run_Credit_Report__c && (oldLead == null || (oldLead != null && oldLead.Run_Credit_Report__c != oLead.Run_Credit_Report__c))) {
        
        creditchecker__Credit_Report__c oRecord4 = new creditchecker__Credit_Report__c();
        oRecord4.creditchecker__Applicants_First_Name__c = 'Marisol L';
        oRecord4.creditchecker__Applicants_Last_Name__c = 'TestCase';
        oRecord4.creditchecker__Applicants_SSN__c = '000000001';
        oRecord4.creditchecker__Current_Line__c = '220 Locust Ave';
        oRecord4.creditchecker__Current_City__c = 'Anthill';
        oRecord4.creditchecker__Current_Zip_Code__c = '65488';
        oRecord4.creditchecker__Current_StateCode__c = 'MO';
        oRecord4.creditchecker__Current_Country__c = 'US';
        oRecord4.creditchecker__Applicants_Residency_Type__c = 'Unknown';
        oRecord4.creditchecker__Parent_Record_Id__c = objLead.Id;
        oRecord4.Owner_Type__c = 'Owner 1';
        oRecord4.Owner_ID__c = '001';
        listCR.add(oRecord4);   
        
        creditchecker__Credit_Report__c oRecord5 = new creditchecker__Credit_Report__c();
        oRecord5.creditchecker__Applicants_First_Name__c = 'David C';
        oRecord5.creditchecker__Applicants_Last_Name__c = 'TestCase';
        oRecord5.creditchecker__Applicants_SSN__c = '000000002';
        oRecord5.creditchecker__Current_Line__c = '504 Grandview St Unit 2';
        oRecord5.creditchecker__Current_City__c = 'Anthill';
        oRecord5.creditchecker__Current_Zip_Code__c = '65488';
        oRecord5.creditchecker__Current_StateCode__c = 'MO';
        oRecord5.creditchecker__Current_Country__c = 'US';
        oRecord5.creditchecker__Applicants_Residency_Type__c = 'Unknown';
        oRecord5.creditchecker__Parent_Record_Id__c = objLead.Id;
        oRecord5.Owner_Type__c = 'Owner 2';
        oRecord5.Owner_ID__c = '002';
        listCR.add(oRecord5);
        
        insert listCR;
        
        Attachment attach1=new Attachment();    
        attach1.Name='Unit Test Attachment';
        attach1.ParentId = listCR[0].Id;
        Blob bodyBlob1=Blob.valueOf('Unit Test Attachment Body');
        attach1.body=bodyBlob1;
        Insert attach1;
        
        Attachment attach2=new Attachment();    
        attach2.Name='Unit Test Attachment';
        attach2.ParentId = listCR[1].Id;
        Blob bodyBlob2=Blob.valueOf('Unit Test Attachment Body');
        attach2.body=bodyBlob2;
        Insert attach2;
        
        //Insert quickCashFlow 
        
        Quick_Cash_Flow__c quickCashFlow = new Quick_Cash_Flow__c ();
        quickCashFlow.Interest_Exp_CY3__c = 11221;
        quickCashFlow.Non_Recurring_Expenses_CY__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY1__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY2__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY3__c = 11212;
        quickCashFlow.Affilliate_Income_CY__c = 12;
        quickCashFlow.Affilliate_Income_CY1__c = 12;
        quickCashFlow.Affilliate_Income_CY2__c = 12;
        quickCashFlow.Affilliate_Income_CY3__c = 121212;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY1__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY2__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY3__c = -11000;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY__c = -11962;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY1__c = -11963;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY2__c = -11964;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY3__c = -10978;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY1__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY2__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY3__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY1__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY2__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY3__c = 0;
        quickCashFlow.Total_First_CY__c = 4;
        quickCashFlow.Total_First_CY1__c = 4;
        quickCashFlow.Total_First_CY2__c = 4;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY__c = 300;
        quickCashFlow.Total_First_CY3__c = 44856;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY1__c = 300;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY2__c = 300;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY3__c = 300;
        quickCashFlow.Annual_Existing_P_I_CY__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY1__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY2__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY3__c = 3300;
        quickCashFlow.Proposed_P_I_CY__c = 37147;
        quickCashFlow.Proposed_P_I_CY1__c = 37147;
        quickCashFlow.Proposed_P_I_CY2__c = 37147;
        quickCashFlow.Proposed_P_I_CY3__c = 34051.4;
        quickCashFlow.Total_Second_CY__c = 40747;
        quickCashFlow.Total_Second_CY2__c = 40747;
        quickCashFlow.Total_Second_CY1__c = 40747;
        quickCashFlow.Total_Second_CY3__c = 37351.4;
        quickCashFlow.Global_Coverage_Ratio_CY__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY1__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY2__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY3__c = 3.86;
        quickCashFlow.Business_Coverage_Ratio_CY__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY1__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY2__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY3__c = 1.2;
        quickCashFlow.Time_in_Business_Months__c = 227;
        quickCashFlow.Estimated_CCR__c = 1;
        quickCashFlow.Industry_High_Risk__c = false;
        quickCashFlow.Loan_Amount_Actual__c = 150000;
        quickCashFlow.Loan_Amount_Status__c = false;
        quickCashFlow.Interest_Rate_Adjusted__c = 8.75;
        quickCashFlow.Interest_Rate_Status__c = false;
        quickCashFlow.Term_Months_Actual__c = 25;
        quickCashFlow.Term_Months_Adjusted__c = 60;
        quickCashFlow.Term_Months_Status__c = false;
        quickCashFlow.DueIn_Months_Actual__c = 19;
        quickCashFlow.DueIn_Months_Status__c = false;
        quickCashFlow.Projected_Daily_Payment__c = 147.4086773328258;
        quickCashFlow.Projected_Monthly_Payment__c = 3095.5822239893414;
        quickCashFlow.Projected_Weekly_Payment__c = 714.3651286129249;
        quickCashFlow.Projected_Annual_Payment__c = 37146.98668787209;
        quickCashFlow.Projected_BiWeekly_Payment__c = 1428.73025722585;
        quickCashFlow.Projected_SemiMonthly_Payment__c = 1547.7911119946707;
        quickCashFlow.Interestdividend_Income_O1_CY__c = 2;
        quickCashFlow.Interestdividend_Income_CY1__c = 2;
        quickCashFlow.Interestdividend_Income_CY2__c = 2;
        quickCashFlow.Interestdividend_Income_CY3__c = 2;
        quickCashFlow.K1_Distributions_O1_CY__c = 5;
        quickCashFlow.K1_Distributions_O1_CY1__c = 5;
        quickCashFlow.K1_Distributions_O1_CY2__c = 5;
        quickCashFlow.K1_Distributions_O1_CY3__c = 5;
        quickCashFlow.Other_Income_O1_CY__c = 4;
        quickCashFlow.Other_Income_O1_CY1__c = 4;
        quickCashFlow.Other_Income_O1_CY2__c = 3;
        quickCashFlow.Other_Income_O1_CY3__c = 2;
        quickCashFlow.PensionIRA_Distributions_O1_CY__c = 5;
        quickCashFlow.PensionIRA_Distributions_O1_CY1__c = 5;
        quickCashFlow.PensionIRA_Distributions_O1_CY2__c = 5;
        quickCashFlow.Salary_Wages_Borrower_O1_CY__c = 3;
        quickCashFlow.Salary_Wages_Borrower_O1_CY1__c = 2;
        quickCashFlow.Salary_Wages_Borrower_O1_CY2__c = 2;
        quickCashFlow.Salary_Wages_Borrower_O1_CY3__c = 1;
        quickCashFlow.Salary_Wages_Spouse_O1_CY__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY1__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY2__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY3__c = 2;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY1__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY2__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY3__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY1__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY2__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY1__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY2__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY3__c = 5;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY1__c = 2;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY2__c = 2;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY3__c = 2;
        quickCashFlow.Owner1_Adult__c = 1;
        quickCashFlow.Owner2_Adult__c = 1;
        quickCashFlow.Owner1_Kid__c = 2;
        quickCashFlow.Owner1_Adult_Currency__c = 6000;
        quickCashFlow.Owner2_Adult_Currency__c = 6000;
        quickCashFlow.Owner1_Kid_Currency__c = 6000;
        quickCashFlow.Owner2_Kid_Currency__c = 6000;
        quickCashFlow.Residence_Mortgage_Owner_1__c = 22;
        quickCashFlow.Residence_Mortgage_Owner_2__c = 22;
        quickCashFlow.Residence_Mortgage_Owner_3__c = 33;
        quickCashFlow.Residence_Mortgage_Owner_4__c = 44;
        quickCashFlow.Residence_Mortgage_Owner_5__c = 55;
        quickCashFlow.Rental_Payment_Owner_1__c = 2;
        quickCashFlow.HELOC_Owner_1__c = 3;
        quickCashFlow.Installment_Debt_Owner_1__c = 4;
        quickCashFlow.Total_Annual_Debt_Service_Owner_1__c = 24;
        quickCashFlow.Months_CY1__c = 12;
        quickCashFlow.Months_CY__c = 12;
        quickCashFlow.Months_CY2__c = 12;
        quickCashFlow.Months_CY3__c = 11;
        quickCashFlow.Sales_CY__c = 1;
        quickCashFlow.Sales_CY1__c = 1;
        quickCashFlow.Sales_CY2__c = 1;
        quickCashFlow.Sales_CY3__c = 1212;
        quickCashFlow.Net_Profit_CY__c = 1;
        quickCashFlow.Net_Profit_CY1__c = 1;
        quickCashFlow.Net_Profit_CY2__c = 1;
        quickCashFlow.Net_Profit_CY3__c = 11212;
        quickCashFlow.New_Rents_CY__c = 1;
        quickCashFlow.New_Rents_CY1__c = 1;
        quickCashFlow.New_Rents_CY2__c = 1;
        quickCashFlow.New_Rents_CY3__c = 11211;
        quickCashFlow.Interest_Exp_CY__c = 1;
        quickCashFlow.Interest_Exp_CY1__c = 1;
        quickCashFlow.Interest_Exp_CY2__c = 1;
        quickCashFlow.Lead__c = objLead.Id;
        insert quickCashFlow;
        Portal_Integration_Response_Code__c  Portalobj1 = new  Portal_Integration_Response_Code__c ();
        Portalobj1.Request__c = 'Testing Error hANDLING';
        Portalobj1.Response__c = 'Testing Error hANDLING';
        Portalobj1.Success_Error_Code__c = '500';
        Insert Portalobj1;
        
        Portal_Integration_Response_Code__c  Portalobj2 = new  Portal_Integration_Response_Code__c ();
        Portalobj2.Request__c = 'Testing Error hANDLING';
        Portalobj2.Response__c = 'Testing Error hANDLING';
        Portalobj2.Success_Error_Code__c = '200';
        Insert Portalobj2; 
        
       
        
       // attach1.parentId=objLead.id;
        //insert attach;
        Database.LeadConvert lc = new database.LeadConvert();
        lc.setLeadId(objLead.Id);
        
        LeadStatus convertStatus = [SELECT Id, MasterLabel FROM LeadStatus WHERE IsConverted=true LIMIT 1];
        lc.setConvertedStatus(convertStatus.MasterLabel);
        Database.LeadConvertResult lcr = Database.convertLead(lc);
        
        // Make sure conversion was successful
        System.assert(lcr.isSuccess());
        apexManuallyCallPortalApi.CallAllApi(objLead.Id, 'SBA-PPP');
        apexManuallyCallPortalApi.CallAllApi(objLead.Id, 'Non SBA');
         test.StartTest();
         Test.setMock(HttpCalloutMock.class, new JavaAPICallOut_Mock());
        //JavaAPICallOut.sendListOfLeadData (SetofLeadID, objLead.PortalAPIEndPoint__c );
        //JavaAPICallOut.makeJavaPortalUserAPICall();
        test.stopTest();
        Lead ConvertedOpportuntiyID = [select id, convertedOpportunityID  from Lead where ID =:objLead.Id];
        //}
        //catch( exception e)
        //{}
        
        
    }
     public static testMethod void leadConversionUnitTest2() {
        //try {
       Id recTypeId = Schema.SObjectType.Lead.getRecordTypeInfosByName().get('Lendistry Default').getRecordTypeId();
       Tenant_Details__c objTenant =[ Select id,Tenant_ID__c,PortalAPIEndPoint__c, Name from Tenant_Details__c Where Tenant_ID__c=1 limit 1];
        
        Lead objLead = new Lead();
        objLead.RecordTypeId = recTypeId;
        //objLead.Tenant_Details__c = objTenant.id;
        objLead.Title = 'Mr.';
        objLead.FirstName = 'FirstName';
        objLead.LastName = 'test';
        objLead.Company = 'Test';
        objLead.Business_EIN__c = '123456789';
        objlead.Base64_Encoded_Pardot_Url_Parameter__c = 'MDBRMmEwMDAwMDVPbkxGRUEwfHwwMi4wMi4yMDIwIDE5OjAw';
        objLead.Entity_Type__c = 'Corporation';
        objlead.DoNotCall = false;
        objlead.HasOptedOutOfFax = false;
        objlead.Phone = '999-999-9999';
        objlead.pi__Needs_Score_Synced__c = false;
        objlead.pi__pardot_hard_bounced__c = false;
        objlead.Run_Credit_Report__c = false;
        objlead.Run_Owner2_Credit_Report__c = false;
        objlead.Run_Owner3_Credit_Report__c = false;
        objlead.Run_Owner4_Credit_Report__c = false;
        objlead.Run_Owner5_Credit_Report__c = false;
        objLead.Status = 'New';
        objLead.Status_Detail__c = 'New';

        objlead.SSN1__c = '000-00-0001';
        objLead.Street_Owner_1__c='220 Locust Ave';
        objLead.City_Owner_1__c = 'Anthill';
        objLead.State_Owner_1__c='MO';
        objLead.Zip_Code_Owner_1__c='65488';
        objLead.Country_Owner_1__c='US';
        objLead.Email = 'first@gmail.com';
        
        objLead.of_Ownership_Owner__c = 30;
        objLead.Credit_Score__c = 'under 600'; 
        objLead.Run_Credit_Report__c= true;
        objlead.Owner_ID_Owner_1__c = '123';
        objlead.Credit_Score_5th_Owner_from_Webform__c = 'Over 700';
        objlead.DOB_Owner_1__c = Date.newInstance(1989, 12, 9);
        //objlead.DOB_Owner_1__c = Date.today();
        //Second Owner Details
        objLead.Title_2nd_Owner__c = 'Ms';
        objLead.First_Name_2nd_Owner__c = 'SecondName';
        objLead.Last_Name_2nd_Owner__c = 'LastName';
        objLead.SSN2__c = '000-00-0001';
        objLead.Street_Owner_2__c = '220 Locust Ave';
        objLead.State_Owner_2__c = 'MO';
        objLead.Zip_Code_Owner_2__c = '65488';
        objLead.Country_Owner_2__c = 'US';
        objLead.Email_2nd_Owner__c = 'second@gmail.com';
        ObjLead.Phone_2nd_Owner__c = '999-999-9999';
        objLead.of_Ownership_Second_Owner__c = 30;
        objLead.City_Owner_2__c = 'Anthill';
        ObjLead.Credit_Score_2nd_Owner__c = '600 to 650';
        objLead.Run_Owner2_Credit_Report__c =true;
        objLead.Owner_ID_Owner_2__c = '124';
        objlead.DOB_Owner_2__c = Date.newInstance(1989, 12, 9);
        //Third Owner Details
        objLead.First_Name_3rd_Owner__c = 'ThirdName';
        objLead.Last_Name_3rd_Owner__c = 'LastName';
        objLead.SSN_3rd_Owner__c = '000-00-0001';
        objLead.of_Ownership_3rd_Owner__c = 4;
        objLead.City_Owner_3__c = 'Anthill';
        objLead.Email_3rd_Owner__c = 'third@gmail.com';
        objLead.Street_Owner_3__c = '220 Locust Ave';
        objLead.State_Owner_3__c = 'MO';
        objLead.Title_3rd_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_3__c ='65488';
        objLead.Country_Owner_3__c = 'US';
        ObjLead.Credit_Score_3rd_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_3rd_Owner__c = '999-999-9999';
        objLead.Run_Owner3_Credit_Report__c =true;
        objLead.Owner_ID_Owner_3__c = '125';
        objlead.DOB_Owner_3__c = Date.newInstance(1989, 12, 9);
        //Fourth Owner details
        objLead.First_Name_4th_Owner__c = 'FourthName';
        objLead.Last_Name_4th_Owner__c = 'LastName';
        objLead.SSN_4th_Owner__c = '000-00-0001';
        objLead.of_Ownership_4th_Owner__c = 5;
        objLead.City_Owner_4__c = 'Anthill';
        objLead.Email_4th_Owner__c = 'fourth@gmail.com';
        objLead.Street_Owner_4__c = '220 Locust Ave';
        objLead.State_Owner_4__c = 'MO';
        objLead.Title_4th_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_4__c = '65488';
        objLead.Country_Owner_4__c = 'US';
        ObjLead.Credit_Score_4th_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_4th_Owner__c = '999-999-9999';
        objLead.Run_Owner4_Credit_Report__c=true;
        objLead.Owner_ID_Owner_4__c = '126';
        objlead.DOB_Owner_4__c = Date.newInstance(1989, 12, 9);
        //Fifth Owner Details
        objLead.First_Name_5th_Owner__c = 'FifthName';
        objLead.Last_Name_5th_Owner__c = 'LastName';
        objLead.SSN_5th_Owner__c = '000-00-0001';
        objLead.of_Ownership_5th_Owner__c = 6;
        objLead.City_Owner_5__c = 'Anthill';
        objLead.Email_5th_Owner__c   = 'fifth@gmail.com';
        objLead.Street_Owner_5__c = '220 Locust Ave';
        objLead.State_Owner_5__c = 'MO';
        objLead.Title_5th_Owner__c = 'Ms';
        objLead.Zip_Code_Owner_5__c = '65488';
        objLead.Country_Owner_5__c = 'US';
        ObjLead.Credit_Score_5th_Owner_from_Webform__c = '600 to 650';
        ObjLead.Phone_5th_Owner__c = '999-999-9999';
        ObjLead.Run_Owner5_Credit_Report__c =true;
        objLead.Owner_ID_Owner_5__c = '127';
        objlead.DOB_Owner_5__c =Date.newInstance(1989, 12, 9);
        objLead.Are_you_COD_30_60_90__c = ' Yes';
        objLead.AnnualRevenue = 2313;
        objLead.Brief_History_on_the_business__c = 'Testing';
        objLead.What_exactly_does_the_business_do__c = 'Test';
        objLead.Who_is_your_customer_base__c = 'test';
        objLead.Do_You_Carry_Life_Insurance__c = 'test';
        objLead.Planned_Changes_In_Next_6_Months__c = 'test';
        objLead.Brief_History_on_the_owner_manager__c = 'test';
        objLead.What_are_the_terms_of_your_current_lease__c = 'test';
        objLead.Who_is_your_customer_base__c = 'test';
        objLead.Do_you_pay_child_support_or_alimony__c = 'yes';
        objLead.Explanation_of_any_BKs_defaults_etc__c = 'Test';
        objLead.Industry = 'Banking';
        objLead.Profitable_Last_2_Years__c = 'Yes';
        objLead.Requested_Amount__c = 90000;
        objLead.Homeowner__c = 'Yes';
        objLead.Monthly_Rent_Mtg__c = 500;
        objLead.Net_Worth__c = 51000;        
        objLead.TIB_Months__c = '21';
        objLead.Use_of_Funds__c = 'Working Capital';
        objLead.What_are_the_terms_of_your_current_lease__c ='Testing';
        objLead.Are_you_COD_30_60_90__c = 'Testing';
        objLead.Brief_History_on_the_business__c = 'Testing'; 
        objLead.Brief_History_on_the_owner_manager__c = 'Testing';
        objLead.Who_is_your_customer_base__c = 'Testing';
        objLead.What_is_the_purpose_of_loan__c =  'Testing';
        objLead.What_are_the_terms_of_your_current_lease__c =  'Testing';
        objLead.Referral_type__c = 'BANK';
        objLead.Have_you_ever_defaulted_on_a_govt_loan__c='no';
        objLead.Have_you_filed_for_bankruptcy__c='no';
        objLead.Legal_action_pending_against_youspouse__c='no';
        objLead.What_is_the_value_of_your_personal_asset__c=1800000;
        objLead.Are_you_delinquent_on_child_support__c='yes';
        objLead.Business_tax_liens_from_the_IRS_or_State__c='yes';
        objLead.Did_you_take_out_PPP_or_a_EIDL_loan__c='PPP';
        objLead.Do_you_have_any_other_outstanding_liens__c='yes';
        objLead.Do_you_have_a_tax_lien_of_taxes_due__c='yes';
        objLead.Do_you_own_a_real_estate__c='yes';
        objLead.Has_your_PPP_loan_been_forgiven__c='no';
        objLead.What_does_your_Business_do__c = 'Service Business';
        objLead.What_type_of_Business_is_it__c = 'Entertainment';
        objLead.Tell_us_more__c = 'Full Service Restaurant';
        objLead.BusinessId__c = '1156';
        objLead.LeadSource = 'Portal';
        objLead.Campaign_Source__c = 'Finished';
        objLead.Portal_Application_Status__c= 'Finished';
        insert objLead;
        
        Set <String> SetofLeadID = new set <String>();
        SetofLeadID.add(ObjLead.Id);
        //=====================Creating Credit Report test Data==========================
        List<creditchecker__Credit_Report__c> listCR = new List<creditchecker__Credit_Report__c>();
        //if(oLead.Run_Credit_Report__c && (oldLead == null || (oldLead != null && oldLead.Run_Credit_Report__c != oLead.Run_Credit_Report__c))) {
        
        creditchecker__Credit_Report__c oRecord4 = new creditchecker__Credit_Report__c();
        oRecord4.creditchecker__Applicants_First_Name__c = 'Marisol L';
        oRecord4.creditchecker__Applicants_Last_Name__c = 'TestCase';
        oRecord4.creditchecker__Applicants_SSN__c = '000000001';
        oRecord4.creditchecker__Current_Line__c = '220 Locust Ave';
        oRecord4.creditchecker__Current_City__c = 'Anthill';
        oRecord4.creditchecker__Current_Zip_Code__c = '65488';
        oRecord4.creditchecker__Current_StateCode__c = 'MO';
        oRecord4.creditchecker__Current_Country__c = 'US';
        oRecord4.creditchecker__Applicants_Residency_Type__c = 'Unknown';
        oRecord4.creditchecker__Parent_Record_Id__c = objLead.Id;
        oRecord4.Owner_Type__c = 'Owner 1';
        oRecord4.Owner_ID__c = '001';
        listCR.add(oRecord4);   
        
        creditchecker__Credit_Report__c oRecord5 = new creditchecker__Credit_Report__c();
        oRecord5.creditchecker__Applicants_First_Name__c = 'David C';
        oRecord5.creditchecker__Applicants_Last_Name__c = 'TestCase';
        oRecord5.creditchecker__Applicants_SSN__c = '000000002';
        oRecord5.creditchecker__Current_Line__c = '504 Grandview St Unit 2';
        oRecord5.creditchecker__Current_City__c = 'Anthill';
        oRecord5.creditchecker__Current_Zip_Code__c = '65488';
        oRecord5.creditchecker__Current_StateCode__c = 'MO';
        oRecord5.creditchecker__Current_Country__c = 'US';
        oRecord5.creditchecker__Applicants_Residency_Type__c = 'Unknown';
        oRecord5.creditchecker__Parent_Record_Id__c = objLead.Id;
        oRecord5.Owner_Type__c = 'Owner 2';
        oRecord5.Owner_ID__c = '002';
        
        
        listCR.add(oRecord5);
        
        insert listCR;
        
        Attachment attach1=new Attachment();    
        attach1.Name='Unit Test Attachment';
        attach1.ParentId = listCR[0].Id;
        Blob bodyBlob1=Blob.valueOf('Unit Test Attachment Body');
        attach1.body=bodyBlob1;
        Insert attach1;
        
        Attachment attach2=new Attachment();    
        attach2.Name='Unit Test Attachment';
        attach2.ParentId = listCR[1].Id;
        Blob bodyBlob2=Blob.valueOf('Unit Test Attachment Body');
        attach2.body=bodyBlob2;
        Insert attach2;
        
        //Insert quickCashFlow 
        
        Quick_Cash_Flow__c quickCashFlow = new Quick_Cash_Flow__c ();
        quickCashFlow.Interest_Exp_CY3__c = 11221;
        quickCashFlow.Non_Recurring_Expenses_CY__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY1__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY2__c = 1;
        quickCashFlow.Non_Recurring_Expenses_CY3__c = 11212;
        quickCashFlow.Affilliate_Income_CY__c = 12;
        quickCashFlow.Affilliate_Income_CY1__c = 12;
        quickCashFlow.Affilliate_Income_CY2__c = 12;
        quickCashFlow.Affilliate_Income_CY3__c = 121212;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY1__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY2__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY__c = -12000;
        quickCashFlow.Owner_1_Personal_Disc_SD_CY3__c = -11000;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY__c = -11962;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY1__c = -11963;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY2__c = -11964;
        quickCashFlow.Owner_2_Personal_Disc_SD_CY3__c = -10978;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY1__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY2__c = 0;
        quickCashFlow.Owner_3_Personal_Disc_SD_CY3__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY1__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY2__c = 0;
        quickCashFlow.Owner_4_Personal_Disc_SD_CY3__c = 0;
        quickCashFlow.Total_First_CY__c = 4;
        quickCashFlow.Total_First_CY1__c = 4;
        quickCashFlow.Total_First_CY2__c = 4;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY__c = 300;
        quickCashFlow.Total_First_CY3__c = 44856;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY1__c = 300;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY2__c = 300;
        quickCashFlow.Monthly_Existing_Installment_Debt_CY3__c = 300;
        quickCashFlow.Annual_Existing_P_I_CY__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY1__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY2__c = 3600;
        quickCashFlow.Annual_Existing_P_I_CY3__c = 3300;
        quickCashFlow.Proposed_P_I_CY__c = 37147;
        quickCashFlow.Proposed_P_I_CY1__c = 37147;
        quickCashFlow.Proposed_P_I_CY2__c = 37147;
        quickCashFlow.Proposed_P_I_CY3__c = 34051.4;
        quickCashFlow.Total_Second_CY__c = 40747;
        quickCashFlow.Total_Second_CY2__c = 40747;
        quickCashFlow.Total_Second_CY1__c = 40747;
        quickCashFlow.Total_Second_CY3__c = 37351.4;
        quickCashFlow.Global_Coverage_Ratio_CY__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY1__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY2__c = -0.59;
        quickCashFlow.Global_Coverage_Ratio_CY3__c = 3.86;
        quickCashFlow.Business_Coverage_Ratio_CY__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY1__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY2__c = 0;
        quickCashFlow.Business_Coverage_Ratio_CY3__c = 1.2;
        quickCashFlow.Time_in_Business_Months__c = 227;
        quickCashFlow.Estimated_CCR__c = 1;
        quickCashFlow.Industry_High_Risk__c = false;
        quickCashFlow.Loan_Amount_Actual__c = 150000;
        quickCashFlow.Loan_Amount_Status__c = false;
        quickCashFlow.Interest_Rate_Adjusted__c = 8.75;
        quickCashFlow.Interest_Rate_Status__c = false;
        quickCashFlow.Term_Months_Actual__c = 25;
        quickCashFlow.Term_Months_Adjusted__c = 60;
        quickCashFlow.Term_Months_Status__c = false;
        quickCashFlow.DueIn_Months_Actual__c = 19;
        quickCashFlow.DueIn_Months_Status__c = false;
        quickCashFlow.Projected_Daily_Payment__c = 147.4086773328258;
        quickCashFlow.Projected_Monthly_Payment__c = 3095.5822239893414;
        quickCashFlow.Projected_Weekly_Payment__c = 714.3651286129249;
        quickCashFlow.Projected_Annual_Payment__c = 37146.98668787209;
        quickCashFlow.Projected_BiWeekly_Payment__c = 1428.73025722585;
        quickCashFlow.Projected_SemiMonthly_Payment__c = 1547.7911119946707;
        quickCashFlow.Interestdividend_Income_O1_CY__c = 2;
        quickCashFlow.Interestdividend_Income_CY1__c = 2;
        quickCashFlow.Interestdividend_Income_CY2__c = 2;
        quickCashFlow.Interestdividend_Income_CY3__c = 2;
        quickCashFlow.K1_Distributions_O1_CY__c = 5;
        quickCashFlow.K1_Distributions_O1_CY1__c = 5;
        quickCashFlow.K1_Distributions_O1_CY2__c = 5;
        quickCashFlow.K1_Distributions_O1_CY3__c = 5;
        quickCashFlow.Other_Income_O1_CY__c = 4;
        quickCashFlow.Other_Income_O1_CY1__c = 4;
        quickCashFlow.Other_Income_O1_CY2__c = 3;
        quickCashFlow.Other_Income_O1_CY3__c = 2;
        quickCashFlow.PensionIRA_Distributions_O1_CY__c = 5;
        quickCashFlow.PensionIRA_Distributions_O1_CY1__c = 5;
        quickCashFlow.PensionIRA_Distributions_O1_CY2__c = 5;
        quickCashFlow.Salary_Wages_Borrower_O1_CY__c = 3;
        quickCashFlow.Salary_Wages_Borrower_O1_CY1__c = 2;
        quickCashFlow.Salary_Wages_Borrower_O1_CY2__c = 2;
        quickCashFlow.Salary_Wages_Borrower_O1_CY3__c = 1;
        quickCashFlow.Salary_Wages_Spouse_O1_CY__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY1__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY2__c = 2;
        quickCashFlow.Salary_Wages_Spouse_O1_CY3__c = 2;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY1__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY2__c = 5;
        quickCashFlow.Sch_D_Capital_gainslosses_O1_CY3__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY1__c = 5;
        quickCashFlow.Schedule_C_Income_O1_CY2__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY1__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY2__c = 5;
        quickCashFlow.Schedule_E_Rental_O1_CY3__c = 5;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY1__c = 2;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY2__c = 2;
        quickCashFlow.Other_GuaranteedwagesaffiliatesO1CY3__c = 2;
        quickCashFlow.Owner1_Adult__c = 1;
        quickCashFlow.Owner2_Adult__c = 1;
        quickCashFlow.Owner1_Kid__c = 2;
        quickCashFlow.Owner1_Adult_Currency__c = 6000;
        quickCashFlow.Owner2_Adult_Currency__c = 6000;
        quickCashFlow.Owner1_Kid_Currency__c = 6000;
        quickCashFlow.Owner2_Kid_Currency__c = 6000;
        quickCashFlow.Residence_Mortgage_Owner_1__c = 22;
        quickCashFlow.Residence_Mortgage_Owner_2__c = 22;
        quickCashFlow.Residence_Mortgage_Owner_3__c = 33;
        quickCashFlow.Residence_Mortgage_Owner_4__c = 44;
        quickCashFlow.Residence_Mortgage_Owner_5__c = 55;
        quickCashFlow.Rental_Payment_Owner_1__c = 2;
        quickCashFlow.HELOC_Owner_1__c = 3;
        quickCashFlow.Installment_Debt_Owner_1__c = 4;
        quickCashFlow.Total_Annual_Debt_Service_Owner_1__c = 24;
        quickCashFlow.Months_CY1__c = 12;
        quickCashFlow.Months_CY__c = 12;
        quickCashFlow.Months_CY2__c = 12;
        quickCashFlow.Months_CY3__c = 11;
        quickCashFlow.Sales_CY__c = 1;
        quickCashFlow.Sales_CY1__c = 1;
        quickCashFlow.Sales_CY2__c = 1;
        quickCashFlow.Sales_CY3__c = 1212;
        quickCashFlow.Net_Profit_CY__c = 1;
        quickCashFlow.Net_Profit_CY1__c = 1;
        quickCashFlow.Net_Profit_CY2__c = 1;
        quickCashFlow.Net_Profit_CY3__c = 11212;
        quickCashFlow.New_Rents_CY__c = 1;
        quickCashFlow.New_Rents_CY1__c = 1;
        quickCashFlow.New_Rents_CY2__c = 1;
        quickCashFlow.New_Rents_CY3__c = 11211;
        quickCashFlow.Interest_Exp_CY__c = 1;
        quickCashFlow.Interest_Exp_CY1__c = 1;
        quickCashFlow.Interest_Exp_CY2__c = 1;
        quickCashFlow.Lead__c = objLead.Id;
        insert quickCashFlow;
        Portal_Integration_Response_Code__c  Portalobj1 = new  Portal_Integration_Response_Code__c ();
        Portalobj1.Request__c = 'Testing Error hANDLING';
        Portalobj1.Response__c = 'Testing Error hANDLING';
        Portalobj1.Success_Error_Code__c = '500';
        Insert Portalobj1;
        
        Portal_Integration_Response_Code__c  Portalobj2 = new  Portal_Integration_Response_Code__c ();
        Portalobj2.Request__c = 'Testing Error hANDLING';
        Portalobj2.Response__c = 'Testing Error hANDLING';
        Portalobj2.Success_Error_Code__c = '200';
        Insert Portalobj2; 
        
       
        
       // attach1.parentId=objLead.id;
        //insert attach;
        Database.LeadConvert lc = new database.LeadConvert();
        lc.setLeadId(objLead.Id);
        
        LeadStatus convertStatus = [SELECT Id, MasterLabel FROM LeadStatus WHERE IsConverted=true LIMIT 1];
        lc.setConvertedStatus(convertStatus.MasterLabel);
        Database.LeadConvertResult lcr = Database.convertLead(lc);
        
        // Make sure conversion was successful
        System.assert(lcr.isSuccess());
        apexManuallyCallPortalApi.CallAllApi(objLead.Id, 'SBA-PPP');
        apexManuallyCallPortalApi.CallAllApi(objLead.Id, 'Non SBA');
         test.StartTest();
         Test.setMock(HttpCalloutMock.class, new JavaAPICallOut_Mock());
        //JavaAPICallOut.sendListOfLeadData (SetofLeadID, objLead.PortalAPIEndPoint__c );
        //JavaAPICallOut.makeJavaPortalUserAPICall();
        test.stopTest();
        Lead ConvertedOpportuntiyID = [select id, convertedOpportunityID  from Lead where ID =:objLead.Id];
        //}catch( exception e)   {}
        
        
    }
    @isTest
    Public static void insertUser(){
        //try{ 
        Test.setMock(HttpCalloutMock.class, new JavaAPICallOut_Mock());
        Profile p = [SELECT Id FROM Profile WHERE Name='Standard User']; 
        user userObj = new user();
        userObj.Alias = 'standt';
        userObj.Email='standarduser@testorg.com'; 
        userObj.EmailEncodingKey='UTF-8';
        userObj.LastName='Testing';
        userObj.LanguageLocaleKey='en_US';
        userObj.LocaleSidKey='en_US';
        userObj.ProfileId = p.Id;
        userObj.TimeZoneSidKey='America/Los_Angeles';
        userObj.UserName='alphaCharlie@betaalphaCharlie.com';
        
        Test.startTest();
            insert userObj;
            userObj.LastName = 'Testing1';
            update userObj;
        Test.stopTest();
       // }catch( exception e)     {}
       
    }
 
}